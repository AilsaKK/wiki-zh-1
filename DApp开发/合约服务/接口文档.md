

## 全局参数说明

1. 各接口参数url为rpc服务地址，生产环境需要配置生产rpc地址，可向官方客服申请。也可使用自己部署的版本。

2. 各接口参数businessId为业务id，用作匹配各业务的配置项，目前用来匹配Aes 密钥（aes密钥用来加密交易账户私钥）

   (1) bussinessId为 1 对应的秘钥为 yitawzdk3ueqarfq

   (2) bussinessId为 2 对应的秘钥为 azrtiabarda3ufgq

3. 各接口参数notifyUrl与attach都非必需，如果交易接口传了这俩参数，则会回调到对应地址，但是并不保证100%回调。因此需要配合调用3.14接口主动查询交易结果

4. 所有接口有notifyUrl字段的，都会接收到回调，回调结构参考如下，具体结构以回调接口返回为准

```json
{
    "attach":"1-666212010161642094848790",
    "blockHeight":9061425,
    "code":200,
    "contractAddress":"0x0000000000000000000000000000000000000000",
    "errorMsg":"",
    "hash":"0x43a989f62947f94754f3433cd1a05fdb1f9f16d3c08105ede3b7a73130680a23",
    "inputUnpack":{
        "method":"",
        "inputmap":null
    },
    "logs":[
        {
            "address":"0x58e322d9fbe83d5476d217bcee076f5ec567ff35",
            "blockNumber":"0x8a4431",
            "data":"000000000000000000000000000000000000000000000000000000000000183636363231323031303136313634323039343834383739300000000000000000",
            "logIndex":"0x0",
            "topics":[
                "0xe156df32946fe9ea0fb3803e9b88ca80a09d92a56b05f1b049af2bc9c43adec0"
            ],
            "transactionHash":"0x43a989f62947f94754f3433cd1a05fdb1f9f16d3c08105ede3b7a73130680a23",
            "transactionIndex":"0x0"
        }
    ],
    "out":"0x000000000000000000000000000000000000000000000000000000000000005a",
    "root":"eyJmZWUiOiIxOTQ2MDEyMDAwMDAwMDAwMDAiLCJyb290IjpudWxsfQ==",
    "status":1,
    "transactionHash":"0x43a989f62947f94754f3433cd1a05fdb1f9f16d3c08105ede3b7a73130680a23",
    "tx":{
        "chainid":1,
        "extra":"0x",
        "from":"0xe1723ff732b9b90d5b083495678f9e218a2be70d",
        "hash":"",
        "input":"0x48e3ae17000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000600000000000000000000000000000000000000000000000000000183636363231323031303136313634323039343834383739300000000000000000000000000000000000000000000000000000000000000000000000000000020b7b226365727448617368223a22374a4531776f5373614f59654d61486a77326b7a5976664f315950665533514c343347684a4b326b7a56455c7530303364222c226964223a3136352c22757365724964223a32392c226e616d65223a22e6b58be8af95222c22636572744e6f223a22363636323132303130313631363432303934383438373930222c2274797065223a322c22706174302c22737461747573223a302c22636861696e54696d65223a302c226170706c7954696d65223a302c226e6f746172697a6554696d65223a302c2263726561746554696d65223a313630323833373732392c2275706461746554696d65223a307d000000000000000000000000000000000000047375636300000000000000000000000000000000000000000000000000000000",
        "nonce":213,
        "timestamp":0,
        "to":"0x58e322d9fbe83d5476d217bcee076f5ec567ff35",
        "uselocal":false,
        "value":0
    }
}
```



## 合约服务Http接口

### 1.获取账户信息

1. 此接口用来获取地址对应的链上账户信息，其中nonce为对应账户在链上的交易计数器，每执行完一笔交易，无论成功与否只要交易被打包nonce值都会自动加1。因此每发一笔新的交易都需要获取最新nonce值传入相应接口中。
2. 同一个地址在不同链上账户信息隔离，nonce值也隔离
3. 因链上交易确认需要时间，若需要批量发送交易，客户端应自主自增nonce值，即先获取链上最新的nonce值，在每发完一笔交易之后给nonce加1



接口地址：**/v1/account/get**	

请求方式：**POST** 
请求参数:

| 参数名  | 必选 | 类型   | 说明                                       |
| ------- | ---- | ------ | ------------------------------------------ |
| chainId | Y    | String | 1                                          |
| address | Y    | String | 0xe3b3599093af404231761ca1cf36a11e97571312 |

返回参数说明:

| 参数名 | 类型   | 说明           |
| ------ | ------ | -------------- |
| code   | string | 返回码         |
| msg    | string | 返回信息       |
| data   |        | 返回的业务信息 |

data:

| 参数名          | 类型   | 说明                                           |
| --------------- | ------ | ---------------------------------------------- |
| address         | String | 用户地址                                       |
| codeHash        |        |                                                |
| credit          | Int    |                                                |
| localCredit     |        |                                                |
| longStorageRoot |        |                                                |
| nonce           | Int    | nonce值为此账户在指定链上可执行的第nonce笔交易 |
| storageRoot     |        |                                                |

示例：

```json
{
  "chainId" : "1",
  "address":"0x6a1fb9bfb756bf3d8aa28a189c8d0cb1b277809a"
}
```

返回示例：

```json
{
    "code":200,
    "msg":"success",
    "data":{
        "address":"0x6a1fb9bfb756bf3d8aa28a189c8d0cb1b277809a",
        "balance":0,
        "balanceValue":0,
        "codeHash":null,
        "localCurrency":null,
        "longStorageRoot":null,
        "nonce":0,
        "storageRoot":null
    }
}
```



### 2.编译合约

接口地址：**/v1/contract/compile**	

请求方式：**POST** 
请求参数:

| 参数名      | 必选 | 类型               | 说明                                                         |
| ----------- | ---- | ------------------ | ------------------------------------------------------------ |
| contractMap | Y    | Map<String,String> | map类型，key为合约名称，value为合约代码如果是多个合约文件必须制定其中一个文件名为**Main.sol** 指定为主合约所在文件如果是将多个合约文件代码合成一个，则需要将key 指定为主合约的合约名称 如**Order** |

返回参数说明

| 参数名 | 类型   | 说明           |
| ------ | ------ | -------------- |
| code   | string | 返回码         |
| msg    | string | 返回信息       |
| data   |        | 返回的业务信息 |

data:

| 参数名       | 类型 | 说明                                       |
| ------------ | ---- | ------------------------------------------ |
| contractName |      | 合约名字                                   |
| abi          |      | 返回的合约abi ，内含构造函数以及基础方法等 |
| bytecode     |      | 合约字节码（用来部署）                     |



请求示例

合约代码示例

```java
pragma solidity >= 0.5.0;

contract HelloWorld {
  uint256 age = 17;
  string nickname = "Hello";

  function getAge() public view returns (uint256 data){
    return age;
  }

  function getNickname() public view returns (string memory data){
    return nickname;
  }

  function setNickname(string memory data) public {
    nickname = data;
  }
}
```

对应的转换请求参数 

```json
{
    "businessId":"1",
    "contractMap":{
        "Main.sol":"pragma solidity >= 0.5.0;\ncontract HelloWorld {\n uint256 age = 17;\n string nickname = \"Hello\";\n function getAge() public view returns (uint256 data){\n return age;\n }\n function getNickname() public view returns (string memory data){\n return nickname;\n }\n function setNickname(string memory data) public {\n nickname = data;\n }\n}"
    }
}
```

或者

```json
{
    "businessId":"1",
    "contractMap":{
        "HelloWorld":"pragma solidity >= 0.5.0;\ncontract HelloWorld {\n uint256 age = 17;\n string nickname = \"Hello\";\n function getAge() public view returns (uint256 data){\n return age;\n }\n function getNickname() public view returns (string memory data){\n return nickname;\n }\n function setNickname(string memory data) public {\n nickname = data;\n }\n}"
    }
}
```

返回示例

```json
{
    "code":200,
    "msg":"success",
    "data":{
        "contractAddress":"",
        "contractName":"HelloWorld",
        "abi":"[{\"constant\":false,\"inputs\":[{\"name\":\"data\",\"type\":\"string\"}],\"name\":\"setNickname\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"getAge\",\"outputs\":[{\"name\":\"data\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"getNickname\",\"outputs\":[{\"name\":\"data\",\"type\":\"string\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"}]",    	"bytecode":"0x601160005560c0604052600560808190527f48656c6c6f00000000000000000000000000000000000000000000000000000060a09081526100439160019190610056565b5034801561005057600080fd5b506100f1565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f1061009757805160ff19168380011785556100c4565b828001600101855582156100c4579182015b828111156100c45782518255916020019190600101906100a9565b506100d09291506100d4565b5090565b6100ee91905b808211156100d057600081556001016100da565b90565b610338806101006000396000f3fe6080604052600436106100565763ffffffff7c01000000000000000000000000000000000000000000000000000000006000350416631c5d9faa811461005b578063967e6e6514610110578063abe4136f14610137575b600080fd5b34801561006757600080fd5b5061010e6004803603602081101561007e57600080fd5b81019060208101813564010000000081111561009957600080fd5b8201836020820111156100ab57600080fd5b803590602001918460018302840111640100000000831117156100cd57600080fd5b91908080601f0160208091040260200160405190810160405280939291908181526020018383808284376000920191909152509295506101c1945050505050565b005b34801561011c57600080fd5b506101256101d8565b60408051918252519081900360200190f35b34801561014357600080fd5b5061014c6101df565b6040805160208082528351818301528351919283929083019185019080838360005b8381101561018657818101518382015260200161016e565b50505050905090810190601f1680156101b35780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b80516101d4906001906020840190610274565b5050565b6000545b90565b60018054604080516020601f6002600019610100878916150201909516949094049384018190048102820181019092528281526060939092909183018282801561026a5780601f1061023f5761010080835404028352916020019161026a565b820191906000526020600020905b81548152906001019060200180831161024d57829003601f168201915b5050505050905090565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f106102b557805160ff19168380011785556102e2565b828001600101855582156102e2579182015b828111156102e25782518255916020019190600101906102c7565b506102ee9291506102f2565b5090565b6101dc91905b808211156102ee57600081556001016102f856fea165627a7a723058208c582212c275d0c3855b62b3cb43619e0389cc7ef234d69a2e9206b5728fda8b0029"
    }
}
```





### 2.发布合约(使用编译好的abi）

此接口不返回合约地址，合约地址需要根据返回的 hash 通过3.14接口查询，如果交易成功（status=1）返回结果中contractAddress为链上合约地址

接口地址：**/v1/contract/deploy/abi**

请求方式：**POST** 
请求参数:

| 参数名       | 必选 | 类型                     | 说明                                                         |
| ------------ | ---- | ------------------------ | ------------------------------------------------------------ |
| businessId   | Y    | String                   | 业务id，目前用来匹配对应业务的aes密钥                        |
| from         | Y    | String                   | 交易发起地址                                                 |
| chainId      | Y    | String                   | 链ID                                                         |
| attach       | F    | String                   | 辅助信息，配合notifyUrl使用，回调时会返回此字段              |
| nonce        | Y    | String                   | 交易账户最新nonce                                            |
| params       | Y    | List<Map<String,Object>> | 合约构造函数所需参数                                         |
| privateKey   | Y    | String                   | 加密后的from地址对应的私钥，需要使用businessId对应的aes密钥加密 |
| notifyUrl    | F    | String                   | 回调地址                                                     |
| contractJson | Y    | json                     | 合约abi                                                      |

contractJson：

| 参数名   | 必选 | 类型   | 说明           |
| -------- | ---- | ------ | -------------- |
| bytecode | Y    | String | 编译好的字节码 |
| abi      | Y    | String | 合约abi        |



返回参数说明

| 参数名 | 类型   | 说明     |
| ------ | ------ | -------- |
| code   | String | 返回码   |
| msg    | String | 返回信息 |
| data   |        | 返回数据 |

data:

| 参数名       | 类型   | 说明            |
| ------------ | ------ | --------------- |
| msg          |        | 返回信息        |
| hash         | String | 交易哈希        |
| nonce        | String | 账户最新nonce值 |
| contractJson |        | 合约数据        |

 

contractJson：

| 参数名          | 类型   | 说明     |
| --------------- | ------ | -------- |
| contractAddress | String | 合约地址 |
| contractName    | String | 合约名字 |
| abi             | String | 合约abi  |
| bytecode        | String |          |

请求示例

```json
{
    "businessId":"1",
    "from":"0x6a1fb9bfb756bf3d8aa28a189c8d0cb1b277809a",
    "chainId":"1",
    "attach":"1,2,3,4,5",
    "nonce":2,
    "params":{

    },
    "privateKey":"U28HRVeQCizyJ3SUtaqpkroysZ/hN4g8baLLZqKBHkSsbhbNfH+Fl7qxtQrhH1b9j60igdcbCZ4LyE2jwa9vdlN7SSCWK2W0f4jf7bEGkV0=",
    "notifyUrl":"http://localhost:8101/v1/test/",
    "contractJson":{
        "abi":"[{\"constant\":false,\"inputs\":[{\"name\":\"data\",\"type\":\"string\"}],\"name\":\"setNickname\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"getAge\",\"outputs\":[{\"name\":\"data\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"getNickname\",\"outputs\":[{\"name\":\"data\",\"type\":\"string\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"}]",
        "bytecode":"0x601160005560c0604052600560808190527f48656c6c6f00000000000000000000000000000000000000000000000000000060a09081526100439160019190610056565b5034801561005057600080fd5b506100f1565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f1061009757805160ff19168380011785556100c4565b828001600101855582156100c4579182015b828111156100c45782518255916020019190600101906100a9565b506100d09291506100d4565b5090565b6100ee91905b808211156100d057600081556001016100da565b90565b610338806101006000396000f3fe6080604052600436106100565763ffffffff7c01000000000000000000000000000000000000000000000000000000006000350416631c5d9faa811461005b578063967e6e6514610110578063abe4136f14610137575b600080fd5b34801561006757600080fd5b5061010e6004803603602081101561007e57600080fd5b81019060208101813564010000000081111561009957600080fd5b8201836020820111156100ab57600080fd5b803590602001918460018302840111640100000000831117156100cd57600080fd5b91908080601f0160208091040260200160405190810160405280939291908181526020018383808284376000920191909152509295506101c1945050505050565b005b34801561011c57600080fd5b506101256101d8565b60408051918252519081900360200190f35b34801561014357600080fd5b5061014c6101df565b6040805160208082528351818301528351919283929083019185019080838360005b8381101561018657818101518382015260200161016e565b50505050905090810190601f1680156101b35780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b80516101d4906001906020840190610274565b5050565b6000545b90565b60018054604080516020601f6002600019610100878916150201909516949094049384018190048102820181019092528281526060939092909183018282801561026a5780601f1061023f5761010080835404028352916020019161026a565b820191906000526020600020905b81548152906001019060200180831161024d57829003601f168201915b5050505050905090565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f106102b557805160ff19168380011785556102e2565b828001600101855582156102e2579182015b828111156102e25782518255916020019190600101906102c7565b506102ee9291506102f2565b5090565b6101dc91905b808211156102ee57600081556001016102f856fea165627a7a723058208c582212c275d0c3855b62b3cb43619e0389cc7ef234d69a2e9206b5728fda8b0029"
    }
}
```

返回示例

```json
{    "code":200,    "msg":"success",    "data":{        "msg":"",        "hash":"0x0b60f43eca86166ef4482d4e6a00425baab4428fb8ac4f4e1ce1a16d252ee6cd",        "nonce":"2",        "contractJson":{            "contractAddress":"",            "contractName":"",            "abi":"[{\"constant\":false,\"inputs\":[{\"name\":\"data\",\"type\":\"string\"}],\"name\":\"setNickname\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"getAge\",\"outputs\":[{\"name\":\"data\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"getNickname\",\"outputs\":[{\"name\":\"data\",\"type\":\"string\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"}]",            "bytecode":"0x601160005560c0604052600560808190527f48656c6c6f00000000000000000000000000000000000000000000000000000060a09081526100439160019190610056565b5034801561005057600080fd5b506100f1565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f1061009757805160ff19168380011785556100c4565b828001600101855582156100c4579182015b828111156100c45782518255916020019190600101906100a9565b506100d09291506100d4565b5090565b6100ee91905b808211156100d057600081556001016100da565b90565b610338806101006000396000f3fe6080604052600436106100565763ffffffff7c01000000000000000000000000000000000000000000000000000000006000350416631c5d9faa811461005b578063967e6e6514610110578063abe4136f14610137575b600080fd5b34801561006757600080fd5b5061010e6004803603602081101561007e57600080fd5b81019060208101813564010000000081111561009957600080fd5b8201836020820111156100ab57600080fd5b803590602001918460018302840111640100000000831117156100cd57600080fd5b91908080601f0160208091040260200160405190810160405280939291908181526020018383808284376000920191909152509295506101c1945050505050565b005b34801561011c57600080fd5b506101256101d8565b60408051918252519081900360200190f35b34801561014357600080fd5b5061014c6101df565b6040805160208082528351818301528351919283929083019185019080838360005b8381101561018657818101518382015260200161016e565b50505050905090810190601f1680156101b35780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b80516101d4906001906020840190610274565b5050565b6000545b90565b60018054604080516020601f6002600019610100878916150201909516949094049384018190048102820181019092528281526060939092909183018282801561026a5780601f1061023f5761010080835404028352916020019161026a565b820191906000526020600020905b81548152906001019060200180831161024d57829003601f168201915b5050505050905090565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f106102b557805160ff19168380011785556102e2565b828001600101855582156102e2579182015b828111156102e25782518255916020019190600101906102c7565b506102ee9291506102f2565b5090565b6101dc91905b808211156102ee57600081556001016102f856fea165627a7a723058208c582212c275d0c3855b62b3cb43619e0389cc7ef234d69a2e9206b5728fda8b0029"        }    }}
```

之后经3.15接口(/v2/tx/get)查得合约地址为 0xb9b21d9000d6130b7ff5b53922aaf79582efb5c7





### 3.合约发布(v2)直接使用代码部署

1. 使用solidity语言编写合约。

2. contractMap中key为合约名称，value为合约代码。

3. 如果是多个合约文件则必须指定其中一个文件名为Main.sol --- 主合约所在文件。其他xxx.sol为主合约的依赖合约，可多个，需在Main.sol文件中头部引入，例如:import “./xxx.sol”

4. 如果是将多个合约文件代码合成一个文件，则需要将key 指定为主合约的合约名称 如 HelloWorld

5. **此接口不返回合约地址**，合约地址需要根据返回的 hash 通过3.14接口查询，如果交易成功（status=1）返回结果中contractAddress为链上合约地址

接口地址：**/v2/contract/deploy**

请求方式：**POST** 
请求参数:

| 参数名      | 必选 | 类型               | 说明                                                         |
| ----------- | ---- | ------------------ | ------------------------------------------------------------ |
| businessId  | Y    | String             | 业务id，目前用来匹配对应业务的aes密钥                        |
| from        | Y    | String             | 交易发起地址                                                 |
| chainId     | Y    | String             | 发生在哪个链上                                               |
| attach      | F    | String             | 辅助信息，回调时会返回此字段                                 |
| contractMap | Y    | Map<String,Object> | 合约的sol文件组装之后的json串                                |
| params      | Y    | Map<String,Object> | 合约构造方法参数  {"a":"b","c":d..}                          |
| privateKey  | Y    | String             | 加密后的from地址对应的私钥，需要使用businessId对应的aes密钥加密 |
| notifyUrl   | F    | String             | 回调地址notifyUrl 接收后，需返回下面json给server  { result:"success" } |
| nonce       | Y    | String             | 发起合约需要查询地址对应的最新的nonce发起操作                |

返回参数说明

| 参数名 | 类型   | 说明     |
| ------ | ------ | -------- |
| code   | String | 返回码   |
| msg    | String | 返回信息 |
| data   |        | 返回数据 |

data:

| 参数名       | 类型   | 说明     |
| ------------ | ------ | -------- |
| msg          |        | 返回信息 |
| hash         | String | 哈希     |
| nonce        | String | 随机数   |
| contractJson |        | 合约数据 |

 

contractJson：

| 参数名       | 类型   | 说明     |
| ------------ | ------ | -------- |
| contractName | String | 合约名字 |
| abi          | String | 合约abi  |
| bytecode     | String |          |

请求示例

```json
{    "businessId":"1",    "from":"0x6a1fb9bfb756bf3d8aa28a189c8d0cb1b277809a",    "chainId":"1",    "attach":"1,2,3,4,5",    "nonce":0,    "params":{    }, "privateKey":"U28HRVeQCizyJ3SUtaqpkroysZ/hN4g8baLLZqKBHkSsbhbNfH+Fl7qxtQrhH1b9j60igdcbCZ4LyE2jwa9vdlN7SSCWK2W0f4jf7bEGkV0=",    "notifyUrl":"http://localhost:8101/v1/test/",    "contractMap":{ "HelloWorld":"pragmasolidity>=0.5.0;\ncontractHelloWorld{\nuint256age=17;\nstringnickname=\"Hello\";\nfunctiongetAge()publicviewreturns(uint256data){\nreturnage;\n}\nfunctiongetNickname()publicviewreturns(stringmemorydata){\nreturnnickname;\n}\nfunctionsetNickname(stringmemorydata)public{\nnickname=data;\n}\n}"    }}
```

返回示例

```json
{    "code":200,    "msg":"success",    "data":{        "msg":"",        "hash":"0x8e116ce9a742bcd99a223024f4832e9a6241baa3568a7093f7d91a1467449dcb",        "nonce":"0",        "contractJson":{            "contractAddress":"",            "contractName":"HelloWorld",            "abi":"[{\"constant\":false,\"inputs\":[{\"name\":\"data\",\"type\":\"string\"}],\"name\":\"setNickname\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"getAge\",\"outputs\":[{\"name\":\"data\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"getNickname\",\"outputs\":[{\"name\":\"data\",\"type\":\"string\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"}]",            "bytecode":"0x601160005560c0604052600560808190527f48656c6c6f00000000000000000000000000000000000000000000000000000060a09081526100439160019190610056565b5034801561005057600080fd5b506100f1565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f1061009757805160ff19168380011785556100c4565b828001600101855582156100c4579182015b828111156100c45782518255916020019190600101906100a9565b506100d09291506100d4565b5090565b6100ee91905b808211156100d057600081556001016100da565b90565b610338806101006000396000f3fe6080604052600436106100565763ffffffff7c01000000000000000000000000000000000000000000000000000000006000350416631c5d9faa811461005b578063967e6e6514610110578063abe4136f14610137575b600080fd5b34801561006757600080fd5b5061010e6004803603602081101561007e57600080fd5b81019060208101813564010000000081111561009957600080fd5b8201836020820111156100ab57600080fd5b803590602001918460018302840111640100000000831117156100cd57600080fd5b91908080601f0160208091040260200160405190810160405280939291908181526020018383808284376000920191909152509295506101c1945050505050565b005b34801561011c57600080fd5b506101256101d8565b60408051918252519081900360200190f35b34801561014357600080fd5b5061014c6101df565b6040805160208082528351818301528351919283929083019185019080838360005b8381101561018657818101518382015260200161016e565b50505050905090810190601f1680156101b35780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b80516101d4906001906020840190610274565b5050565b6000545b90565b60018054604080516020601f6002600019610100878916150201909516949094049384018190048102820181019092528281526060939092909183018282801561026a5780601f1061023f5761010080835404028352916020019161026a565b820191906000526020600020905b81548152906001019060200180831161024d57829003601f168201915b5050505050905090565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f106102b557805160ff19168380011785556102e2565b828001600101855582156102e2579182015b828111156102e25782518255916020019190600101906102c7565b506102ee9291506102f2565b5090565b6101dc91905b808211156102ee57600081556001016102f856fea165627a7a723058201ed3aaf8d9869c0147c5b75df033d80a9395b8b08ea1fa3a108545951e019c1b0029"        }    }}
```

之后经交易查询接口查得合约地址为 0x41ae171f6693911cc2e4ff45d5ee6160f3523b9b



### 4.合约交易(v2)

合约交易，用来调用合约中所有会导致数据状态会发生变化的方法。

接口地址：**/v2/contract/send**

请求方式：**POST** 
请求参数:

| 参数名       | 必选 | 类型               | 说明                                                         |
| ------------ | ---- | ------------------ | ------------------------------------------------------------ |
| businessId   | Y    | String             | 业务id，目前用来匹配对应业务的aes密钥                        |
| from         | Y    | String             | 交易发起地址                                                 |
| chainId      | Y    | String             | 发生在哪个链上                                               |
| attach       | F    | String             | 辅助信息，与notify配合使用，回调时会返回此字段               |
| nonce        | Y    | String             | 发起合约需要查询地址对应的最新的nonce发起操作                |
| function     | Y    | Map<String,Object> | {"name":"方法名","params":[{"a":"b"},{"c":"d"}..]}           |
| privateKey   | Y    | String             | 加密后的from地址对应的私钥，需要使用businessId对应的aes密钥加密 |
| notifyUrl    | F    | String             | 回调地址 notifyUrl 接收后，需返回下面json给server  { result:"success" } |
| contractJson | Y    | json               | {"contractAddress":"","contractName":"","abi":"","bytecode":""} |

contractJson：

| 参数名          | 必选 | 类型   | 说明             |
| --------------- | ---- | ------ | ---------------- |
| contractAddress | Y    | String | 要调用的合约地址 |
| abi             | Y    | String | 合约abi          |

返回参数说明

| 参数名 | 类型   | 说明     |
| ------ | ------ | -------- |
| code   | String | 返回码   |
| msg    | String | 返回信息 |
| data   |        | 返回数据 |

data:

| 参数名 | 类型   | 说明        |
| ------ | ------ | ----------- |
| msg    |        | 返回信息    |
| hash   | String | 哈希        |
| nonce  | String | 交易nonce值 |

请求示例

```json
{    "businessId":"1",    "chainId":"1",    "from":"0x6a1fb9bfb756bf3d8aa28a189c8d0cb1b277809a",    "attach":"",    "nonce":1,    "function":{        "name":"setNickname",        "params":{            "data":"中国"        }    }, "privateKey":"U28HRVeQCizyJ3SUtaqpkroysZ/hN4g8baLLZqKBHkSsbhbNfH+Fl7qxtQrhH1b9j60igdcbCZ4LyE2jwa9vdlN7SSCWK2W0f4jf7bEGkV0=",    "notifyUrl":"",    "contract":{        "contractAddress":"0x41ae171f6693911cc2e4ff45d5ee6160f3523b9b",        "abi":"[{\"constant\":true,\"inputs\":[],\"name\":\"getAge\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"data\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"getNickname\",\"outputs\":[{\"internalType\":\"string\",\"name\":\"data\",\"type\":\"string\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"internalType\":\"string\",\"name\":\"data\",\"type\":\"string\"}],\"name\":\"setNickname\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"}]"    }}
```

返回示例

```json
{    "code":200,    "msg":"success",    "data":{        "msg":"",        "hash":"0xd036f76b8658bebca7c919160195df371777bcc530b7359ece31b4963f3575bd",        "nonce":"1"    }}
```



### 5.合约调用(v2)

合约调用，即调用合约中所有仅查看数据状态的方法。

合约调用不会发生数据修改，返回的hash可以忽略。

接口地址：**/v2/contract/call**

请求方式：**POST** 
请求参数:

| 参数名       | 必选 | 类型               | 说明                                                         |
| ------------ | ---- | ------------------ | ------------------------------------------------------------ |
| businessId   | Y    | String             | 业务id，目前用来匹配对应业务的aes密钥                        |
| from         | Y    | String             | 交易发起地址                                                 |
| chainId      | Y    | String             | 发生在哪个链上                                               |
| nonce        | Y    | String             | 交易发起地址最新nonce值                                      |
| function     | Y    | Map<String,Object> | {"name":"方法名","params":[{"a":"b"},{"c":"d"}..]}           |
| privateKey   | Y    | String             | 加密后的from地址对应的私钥，需要使用businessId对应的aes密钥加密 |
| contractJson | Y    | json               | {"contractAddress":"","abi":""}                              |

contractJson：

| 参数名          | 必选 | 类型   | 说明             |
| --------------- | ---- | ------ | ---------------- |
| contractAddress | Y    | String | 要调用的合约地址 |
| abi             | Y    | String | 合约abi          |

返回参数说明

| 参数名 | 类型   | 说明     |
| ------ | ------ | -------- |
| code   | String | 返回码   |
| msg    | String | 返回信息 |
| data   |        | 返回数据 |

data:

| 参数名 | 类型 | 说明     |
| ------ | ---- | -------- |
| msg    |      | 返回信息 |
| value  |      | 返回数据 |

请求示例

```json
{    "businessId":"1",    "chainId":"1",    "from":"0x6a1fb9bfb756bf3d8aa28a189c8d0cb1b277809a",    "nonce":4,    "function":{        "name":"getNickname",        "params":{        }    }, "privateKey":"U28HRVeQCizyJ3SUtaqpkroysZ/hN4g8baLLZqKBHkSsbhbNfH+Fl7qxtQrhH1b9j60igdcbCZ4LyE2jwa9vdlN7SSCWK2W0f4jf7bEGkV0=",    "contract":{        "contractAddress":"0x41ae171f6693911cc2e4ff45d5ee6160f3523b9b",        "abi":"[{\"constant\":true,\"inputs\":[],\"name\":\"getAge\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"data\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"getNickname\",\"outputs\":[{\"internalType\":\"string\",\"name\":\"data\",\"type\":\"string\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"internalType\":\"string\",\"name\":\"data\",\"type\":\"string\"}],\"name\":\"setNickname\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"}]"    }}
```

返回示例

```json
{    "code":200,    "msg":"success",    "data":{        "msg":"success",        "hash":"0xe383006c50df6893b13f82c613709b3587c5733cca06d63eae59d97609d73dce",        "value":{            "data":"中国"        },        "nonce":"4"    }}
```



### 6.加密

注意：测试用，生产请用本地AES工具加解密

接口地址：**/v1/key/encrypt**

请求方式：**POST** 
请求参数:

| 参数名     | 必选 | 类型   | 说明                                  |
| ---------- | ---- | ------ | ------------------------------------- |
| businessId | Y    | String | 业务id，目前用来匹配对应业务的aes密钥 |
| value      | Y    | String | 需要加密的数据                        |

返回参数说明

| 参数名 | 类型   | 说明     |
| ------ | ------ | -------- |
| code   | String | 返回码   |
| msg    | String | 返回信息 |
| data   |        | 返回数据 |

请求示例

```json
{      "businessId":"1",      "value":"265befdd607cdf7ff9bccab9b3b7815d4f96680e5afb73d25ff5974309757fba"}
```

返回示例

```json
{    "code": 200,    "msg": "success",    "data": "U28HRVeQCizyJ3SUtaqpkroysZ/hN4g8baLLZqKBHkSsbhbNfH+Fl7qxtQrhH1b9j60igdcbCZ4LyE2jwa9vdlN7SSCWK2W0f4jf7bEGkV0="}
```



### 7.解密

注意：测试用，生产请用本地AES工具加解密

接口地址：**/v1/key/decrypt**

请求方式：**POST** 
请求参数:

| 参数名     | 必选 | 类型   | 说明                                  |
| ---------- | ---- | ------ | ------------------------------------- |
| businessId | Y    | String | 业务id，目前用来匹配对应业务的aes密钥 |
| value      | Y    | String | 需要解密的数据                        |

 返回参数说明

| 参数名 | 类型   | 说明     |
| ------ | ------ | -------- |
| code   | String | 返回码   |
| msg    | String | 返回信息 |
| data   |        | 返回数据 |

请求示例

```json
{      "businessId":"1", "encryptedValue":"U28HRVeQCizyJ3SUtaqpkroysZ/hN4g8baLLZqKBHkSsbhbNfH+Fl7qxtQrhH1b9j60igdcbCZ4LyE2jwa9vdlN7SSCWK2W0f4jf7bEGkV0="}
```

返回示例

```json
{    "code": 200,    "msg": "success",    "data": "265befdd607cdf7ff9bccab9b3b7815d4f96680e5afb73d25ff5974309757fba"}
```



### 8.通过私钥返回公钥及地址

注意：测试用，生产请用3.10

接口地址：**/v1/key/to/address**

请求方式：**POST** 
请求参数:

| 参数名 | 必选 | 类型   | 说明 |
| ------ | ---- | ------ | ---- |
| key    | Y    | String | 私钥 |

 返回参数说明

| 参数名 | 类型   | 说明     |
| ------ | ------ | -------- |
| code   | String | 返回码   |
| msg    | String | 返回信息 |
| data   |        | 返回数据 |

data:

| 参数名     | 类型   | 说明 |
| ---------- | ------ | ---- |
| privateKey | String | 私钥 |
| publicKey  | String | 公钥 |
| address    | String | 地址 |

请求示例

```json
{   "key":"265befdd607cdf7ff9bccab9b3b7815d4f96680e5afb73d25ff5974309757fba"}
```

返回示例

```json
{    "code": 200,    "msg": "success",    "data": {        "privateKey": "265befdd607cdf7ff9bccab9b3b7815d4f96680e5afb73d25ff5974309757fba",        "publicKey": "0x04c4591e2ae74d5c58157eb20a569785c6f4c739d8600673b5a0ee459f5335c743b550b7f73478c1cf5b49d53f1be67fffa5db1f72d6dc2214e054cf7151c4772e",        "address": "0x6a1fb9bfb756bf3d8aa28a189c8d0cb1b277809a"    }}
```



### 9.公钥及地址(通过加密后的私钥)

接口地址：**/v1/key/encrypt/to/address**

请求方式：**POST** 
请求参数:

| 参数名     | 必选 | 类型   | 说明                                              |
| ---------- | ---- | ------ | ------------------------------------------------- |
| businessId | Y    | String | 业务id，目前用来匹配对应业务的aes密钥             |
| keyEncrypt | Y    | String | 加密后的私钥，需要使用businessId对应的aes密钥加密 |

返回参数说明

| 参数名 | 类型   | 说明     |
| ------ | ------ | -------- |
| code   | String | 返回码   |
| msg    | String | 返回信息 |
| data   |        | 返回数据 |

data:

| 参数名     | 类型   | 说明 |
| ---------- | ------ | ---- |
| privateKey | String | 私钥 |
| publicKey  | String | 公钥 |
| address    | String | 地址 |

请求示例

```json
{     "businessId":"1", "keyEncrypt":"U28HRVeQCizyJ3SUtaqpkroysZ/hN4g8baLLZqKBHkSsbhbNfH+Fl7qxtQrhH1b9j60igdcbCZ4LyE2jwa9vdlN7SSCWK2W0f4jf7bEGkV0="}
```

返回示例

```json
{    "code": 200,    "msg": "success",    "data": {        "privateKey": "U28HRVeQCizyJ3SUtaqpkroysZ/hN4g8baLLZqKBHkSsbhbNfH+Fl7qxtQrhH1b9j60igdcbCZ4LyE2jwa9vdlN7SSCWK2W0f4jf7bEGkV0=",        "publicKey": "0x04c4591e2ae74d5c58157eb20a569785c6f4c739d8600673b5a0ee459f5335c743b550b7f73478c1cf5b49d53f1be67fffa5db1f72d6dc2214e054cf7151c4772e",        "address": "0x6a1fb9bfb756bf3d8aa28a189c8d0cb1b277809a"    }}
```



### 10.生成公私钥

注意：测试用，生产请用3.12

接口地址：**/v1/key/gen**

请求方式：**GET** 
请求参数:

 无

返回参数说明

| 参数名 | 类型   | 说明     |
| ------ | ------ | -------- |
| code   | String | 返回码   |
| msg    | String | 返回信息 |
| data   |        | 返回数据 |

data:

| 参数名     | 类型   | 说明 |
| ---------- | ------ | ---- |
| privateKey | String | 私钥 |
| publicKey  | String | 公钥 |
| address    | String | 地址 |

请求示例

无

返回示例

```json
{    "code": 200,    "msg": "success",    "data": {        "privateKey": "265befdd607cdf7ff9bccab9b3b7815d4f96680e5afb73d25ff5974309757fba",        "publicKey": "0x04c4591e2ae74d5c58157eb20a569785c6f4c739d8600673b5a0ee459f5335c743b550b7f73478c1cf5b49d53f1be67fffa5db1f72d6dc2214e054cf7151c4772e",        "address": "0x6a1fb9bfb756bf3d8aa28a189c8d0cb1b277809a"    }}
```



### 11.生成公私钥(加密)

注意：返回加密后的公私钥

接口地址：**/v1/key/gen/signed**

请求方式：**POST** 
请求参数:

| 参数名     | 必选 | 类型   | 说明                                  |
| ---------- | ---- | ------ | ------------------------------------- |
| businessId | Y    | String | 业务id，目前用来匹配对应业务的aes密钥 |

返回参数说明

| 参数名 | 类型   | 说明     |
| ------ | ------ | -------- |
| code   | String | 返回码   |
| msg    | String | 返回信息 |
| data   |        | 返回数据 |

data:

| 参数名     | 类型   | 说明 |
| ---------- | ------ | ---- |
| privateKey | String | 私钥 |
| publicKey  | String | 公钥 |
| address    | String | 地址 |

请求示例

```json
{	"businessId": "1"}
```

返回示例

```json
{    "code": 200,    "msg": "success",    "data": {        "privateKey": "OThruwzX8UhJXZon8y1G9RAIrDTNDdH5UcGO5fYmXIzczg5f6UHq8V2VA0fcOOxNe1L2Gfx4Ra0+JX9xequP5ewqciFqhmD4fDeCAboafOw=",        "publicKey": "f3xFt2oTP1og4zCPlp2NHIIK42KtiWTNPc+NFTK6U3hPr7vDRg3lNu6N8wsjurAe7MYbZxFXTVlaHzQkxYRWBwnu9WWauMV52Yy9DN2yj5Oxkpja1Yx0NT1i5FQ7FaZLyAkOaKHpgG3dy+Qhy/xrbAApM5yurTb0bOdpJF9grnqmS3PKDiBFBl5Bz6kSmJpm",        "address": "0x13ae763822e051aa054fa763f6fe1b1ff0596025"    }}
```



### 12.根据合约abi反解input

接口地址：**/v1/tx/input/unpack**

请求方式：**POST** 
请求参数:

| 参数名   | 必选 | 类型               | 说明                                              |
| -------- | ---- | ------------------ | ------------------------------------------------- |
| input    | Y    | String             | 需要反解的input                                   |
| contract | Y    | Map<String,Object> | 加密后的私钥，需要使用businessId对应的aes密钥加密 |

contract：

| 参数名 | 类型   | 说明    |
| ------ | ------ | ------- |
| abi    | String | 合约abi |

返回参数说明

| 参数名 | 类型   | 说明     |
| ------ | ------ | -------- |
| code   | String | 返回码   |
| msg    | String | 返回信息 |
| data   |        | 返回数据 |

data:

| 参数名   | 类型               | 说明     |
| -------- | ------------------ | -------- |
| method   | String             | 调用方法 |
| inputmap | Map<String,Object> |          |

请求示例

```json
{    "input": "0x95f3660400000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000006e4b8ade59bbd0000000000000000000000000000000000000000000000000000",     "contract": {        "abi": "[{\"constant\":true,\"inputs\":[],\"name\":\"getAge\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"data\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"getNickname\",\"outputs\":[{\"internalType\":\"string\",\"name\":\"data\",\"type\":\"string\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"internalType\":\"string\",\"name\":\"data\",\"type\":\"string\"}],\"name\":\"setNickname\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"}]"}}
```

返回示例

```json
{    "code": 200,     "msg": "success",     "data": {        "method": "setNickname",         "inputmap": {            "data": "中国"        }}}
```



### 13.根据交易hash查询交易详情（V1）

注意：此接口仅仅用来查询交易详情，应该在生产中使用此接口查询交易结果

接口地址：**/v1/tx/get**

请求方式：**POST** 
请求参数:

| 参数名  | 必选 | 类型   | 说明     |
| ------- | ---- | ------ | -------- |
| chainId | Y    | String | 链ID     |
| hash    | Y    | String | 交易哈希 |

返回参数说明

| 参数名 | 类型   | 说明     |
| ------ | ------ | -------- |
| code   | String | 返回码   |
| msg    | String | 返回信息 |
| data   |        | 返回数据 |

data:

| 参数名          | 类型   | 说明                         |
| --------------- | ------ | ---------------------------- |
| blockHeight     | Int    | 打包块高                     |
| contractAddress | String | 合约地址                     |
| logs            | list   | 时间集                       |
| out             |        | 如果是合约交易，合约执行结果 |
| root            |        |                              |
| status          |        | 交易状态 1 为成功 0 失败     |
| transactionHash | String | 交易hash                     |
| tx              |        | 交易详情                     |
| errorMsg        | String | 错误信息                     |

Logs:

| 参数名           | 类型         | 说明     |
| ---------------- | ------------ | -------- |
| address          | String       | 地址     |
| blockNumber      | Int          | 块高     |
| contractName     | String       |          |
| data             | String       |          |
| event            | list         |          |
| logIndex         | String       |          |
| topics           | List<String> |          |
| transactionHash  | String       |          |
| transactionIndex | String       | 调用方法 |

tx:

| 参数名     | 类型               | 说明           |
| ---------- | ------------------ | -------------- |
| chainid    | String             |                |
| extra      |                    | gas费          |
| from       | String             | 交易发起地址   |
| hash       | String             |                |
| input      |                    |                |
| inputValue | Map<String,Object> | 反解之后的inpu |
| nonce      |                    |                |
| timestamp  | String             | 时间戳         |
| to         | String             | 接受地址       |
| uselocal   | String             |                |
| value      | String             | 金额           |

请求示例

```json
{    "chainId" : "1",    "hash":"0xd036f76b8658bebca7c919160195df371777bcc530b7359ece31b4963f3575bd"}
```

返回示例

```json
{    "code": 200,    "msg": "success",    "data": {        "blockHeight": 10234537,        "contractAddress": "0x0000000000000000000000000000000000000000",        "errorMsg": "",        "gasFee": "13050400000000000",        "gasFeeValue": 0.0130504,        "gasUsed": 32626,        "logs": null,        "out": "0x",        "root": "eyJmZWUiOiIxMzA1MDQwMDAwMDAwMDAwMCIsInJvb3QiOm51bGx9",        "status": 1,        "transactionHash": "0xd036f76b8658bebca7c919160195df371777bcc530b7359ece31b4963f3575bd",        "tx": {            "chainid": 1,            "extra": "0x",            "from": "0x6a1fb9bfb756bf3d8aa28a189c8d0cb1b277809a",            "hash": "",            "input": "0x1c5d9faa00000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000006e4b8ade59bbd0000000000000000000000000000000000000000000000000000",            "nonce": 1,            "timestamp": 0,            "to": "0x41ae171f6693911cc2e4ff45d5ee6160f3523b9b",            "uselocal": false,            "value": 0        }    }}
```



### 14.根据交易hash查询交易详情（V2）

注意：此接口自动将合约交易结果和调用参数做了一层反解，如果合约未被注册，或者不是合约交易，则会报错，因此生产中不推荐使用此接口，只适合辅助对接

接口地址：**/v2/tx/get**

请求方式：**POST** 
请求参数:

| 参数名  | 必选 | 类型   | 说明     |
| ------- | ---- | ------ | -------- |
| chainId | Y    | String | 链ID     |
| hash    | Y    | String | 交易哈希 |

返回参数说明

| 参数名 | 类型   | 说明     |
| ------ | ------ | -------- |
| code   | String | 返回码   |
| msg    | String | 返回信息 |
| data   |        | 返回数据 |

data:

| 参数名          | 类型   | 说明                         |
| --------------- | ------ | ---------------------------- |
| blockHeight     | Int    | 打包块高                     |
| contractAddress | String | 合约地址                     |
| logs            | list   | 时间集                       |
| out             |        | 如果是合约交易，合约执行结果 |
| root            |        | 调用方法                     |
| status          |        | 交易状态 1 为成功 0 失败     |
| transactionHash | String | 交易hash                     |
| tx              |        | 交易详情                     |
| errorMsg        | String | 错误信息                     |
| outValue        | String | Out 的对应反解信息           |

Logs:

| 参数名           | 类型         | 说明                                             |
| ---------------- | ------------ | ------------------------------------------------ |
| address          | String       | 地址                                             |
| blockNumber      | Int          | 块高                                             |
| contractName     | String       | 注册的合约名称                                   |
| data             | String       | 事件非索引参数                                   |
| event            | list         | 反解后的事件                                     |
| logIndex         | String       | 事件索引                                         |
| topics           | List<String> | 第一个数据为事件签名的hash，其余为索引的事件参数 |
| transactionHash  | String       |                                                  |
| transactionIndex | String       | 调用方法                                         |

tx:

| 参数名     | 类型               | 说明           |
| ---------- | ------------------ | -------------- |
| chainid    | String             |                |
| extra      |                    | gas费          |
| from       | String             | 交易发起地址   |
| hash       | String             |                |
| input      |                    |                |
| inputValue | Map<String,Object> | 反解之后的inpu |
| nonce      |                    | 交易时nonce    |
| timestamp  | String             | 时间戳         |
| to         | String             | 接受地址       |
| uselocal   | String             |                |
| value      | String             | 金额           |

请求示例

```json
{    "chainId" : "1",    "hash":"0xd036f76b8658bebca7c919160195df371777bcc530b7359ece31b4963f3575bd"}
```

返回示例

```json
{    "code": 200,    "msg": "success",    "data": {        "blockHeight": 10234537,        "contractAddress": "0x0000000000000000000000000000000000000000",        "contractName": "HelloWorld",        "errorMsg": "",        "gasFee": "13050400000000000",        "gasFeeValue": 0.0130504,        "gasUsed": 32626,        "logs": null,        "out": "0x",        "root": "eyJmZWUiOiIxMzA1MDQwMDAwMDAwMDAwMCIsInJvb3QiOm51bGx9",        "status": 1,        "transactionHash": "0xd036f76b8658bebca7c919160195df371777bcc530b7359ece31b4963f3575bd",        "tx": {            "chainid": 1,            "extra": "0x",            "from": "0x6a1fb9bfb756bf3d8aa28a189c8d0cb1b277809a",            "hash": "",            "input": "0x1c5d9faa00000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000006e4b8ade59bbd0000000000000000000000000000000000000000000000000000",            "inputValue": {                "data": "中国"            },            "method": "setNickname",            "nonce": 1,            "timestamp": 0,            "to": "0x41ae171f6693911cc2e4ff45d5ee6160f3523b9b",            "uselocal": false,            "value": 0        }    }}
```



### 15.获得所有链信息

接口地址：**/v1/chain/get/info**

请求方式：**POST** 
请求参数:

| 参数名   | 必选 | 类型 | 说明                         |
| -------- | ---- | ---- | ---------------------------- |
| chainIds | Y    | list | 链ID列表，传空返回所有链信息 |

返回参数说明

| 参数名 | 类型   | 说明     |
| ------ | ------ | -------- |
| code   | String | 返回码   |
| msg    | String | 返回信息 |
| data   |        | 返回数据 |

data:

| 参数名    | 类型 | 说明 |
| --------- | ---- | ---- |
| chainId   | Int  |      |
| datanodes | list |      |
| mode      | Int  |      |
| parent    | Int  |      |

datanodes:

| 参数名       | 类型   | 说明     |
| ------------ | ------ | -------- |
| dataNodeId   | String | 节点id   |
| dataNodeIp   | String | 节点ip   |
| dataNodePort | String | 节点端口 |

请求示例

```json
{     "chainIds": []}
```

返回示例

```json
{    "code": 200,    "msg": "success",    "data": [        {            "chainId": 0,            "datanodes": [                {                    "dataNodeId": "0x3224de0da639511fec588d2e28f4472476b1600d003a10e38e0456426337624aaecd6636e5ce7ff95fc10746471ce7b680f664ccbf17057ca18c761706afa391",                    "dataNodeIp": "192.168.1.11",                    "dataNodePort": 23021                }            ],            "mode": 17,            "parent": 1048576        },        {            "chainId": 1,            "datanodes": [                {                    "dataNodeId": "0xf236c00e5c1fd175e2ecfe3ccc29dcf27caafe82d4f532b20b64e34b0bb1d132ffd5efaa8e3b2316ccf3f4d9b2112213b01c792f107bd0565be7ac3d506bf31f",                    "dataNodeIp": "192.168.1.11",                    "dataNodePort": 23026                }            ],            "mode": 18,            "parent": 0        },        {            "chainId": 2,            "datanodes": [                {                    "dataNodeId": "0xa9d8dd87c9ece1787cbb16ba179df6d1d4b29580c03ae1da6e4634b154f8e2feb052fc1c07ca1e362f9b3e2b5f43822df9dd6578e782701de83afeca91a7b453",                    "dataNodeIp": "192.168.1.12",                    "dataNodePort": 23021                }            ],            "mode": 18,            "parent": 0        },        {            "chainId": 103,            "datanodes": [                {                    "dataNodeId": "0x44c98ab831f3ca4553e491bba06753e959ceb55d43e18bc76539572feb1e0dbaf2fbfc19f571d6544e82be1c7c39760f6a023d4be4dcb9473dd580c731d03926",                    "dataNodeIp": "192.168.1.12",                    "dataNodePort": 23026                }            ],            "mode": 18,            "parent": 0        }    ]}
```



### 16.获得链当前信息

接口地址：**/v1/chain/get/stats**

请求方式：**POST** 
请求参数:

| 参数名  | 必选 | 类型   | 说明 |
| ------- | ---- | ------ | ---- |
| chainId | Y    | String | 链ID |

返回参数说明

| 参数名 | 类型   | 说明     |
| ------ | ------ | -------- |
| code   | String | 返回码   |
| msg    | String | 返回信息 |
| data   |        | 返回数据 |

data:

| 参数名            | 类型         | 说明              |
| ----------------- | ------------ | ----------------- |
| N                 | String       | 账号个数          |
| accountcount      | Int          |                   |
| currentcomm       | List<String> |                   |
| currentheight     | Long         | 当前高度          |
| epochduration     | Int          | epoch 持续时间    |
| accountcount      | Int          |                   |
| limit             | Long         | 最少的            |
| price             | String       |                   |
| lastNduration     | Int          | 最近持续时间      |
| lastepochduration | Int          | 最近epoch持续时间 |
| lives             | Int          |                   |
| tps               | Int          |                   |
| tpsLastEpoch      | Int          |                   |
| tpsLastN          | Int          |                   |
| txcount           | Int          | 交易数量          |
| version           | String       | 版本              |

请求示例

```json
{     "chainId": "1"}
```

返回示例

```json
{    "code": 200,    "msg": "success",    "data": {        "chainId": 0,        "currentheight": 10235029,        "epochduration": 2603,        "epochlength": 1000,        "gaslimit": 2500000,        "gasprice": "400000000000",        "lastepochduration": 2595,        "lives": 1635307,        "tps": 0,        "tpsLastEpoch": 0,        "n": 10,        "tpsLastN": 0,        "lastNduration": 26,        "txcount": 506,        "accountcount": 0,        "currentcomm": [            "0x025779691bd93cc460e761ad2e8f5900a33a47112322c5503ee5d944e3aa7445b4efbb544881c13284d304c8c8cf0f0804ddc498be550555776fe15b714406ca",            "0x4f47e053cb4f4ff38fc52d9bfb7342b39edd7ef72f7f6cce22b2fa8a3b2656afec9076c239251d2b229245765c1dca005fb448f05e9ea946f40db9908d37abb4",            "0x783f4b2490461ecfd8ee8d3451e434de06bacb0ffff56de53a33fe545589094fa0b929eeaa62dc5203d1e831ccdd37d206d0b85b193921efb223bf0cb2f37b4c",            "0x9855b69ea2ff6b419de14b2ba18910e2427d251a3ffa453d9307a01dbabc213ef08cfad7459538dac14407046048bdd9f936ba317708b3f07a62782a2be6cca7"        ]    }}
```



### 17.获得链委员会信息

接口地址：**/v1/chain/get/committee**

请求方式：**POST** 
请求参数:

| 参数名  | 必选 | 类型   | 说明     |
| ------- | ---- | ------ | -------- |
| chainId | Y    | String | 链ID     |
| epoch   | Y    | String | 选举届数 |

返回参数说明

| 参数名 | 类型         | 说明            |
| ------ | ------------ | --------------- |
| code   | String       | 返回码          |
| msg    | String       | 返回信息        |
| data   | List<String> | 返回数据,节点id |

请求示例

```json
{     "chainId": "1",     "epoch": "1"}
```

返回示例

```json
{    "code": 200,    "msg": "success",    "data": [        "0xe90a151759bf070969aae664e00502bb08568c85a73874492a3ec480c5178d5da29c790896fc62106e32d172819dec94202ff90f3b7ba3e6adf38508bc58cf43",        "0x783f4b2490461ecfd8ee8d3451e434de06bacb0ffff56de53a33fe545589094fa0b929eeaa62dc5203d1e831ccdd37d206d0b85b193921efb223bf0cb2f37b4c",        "0x6e4a2f626a7d6dd082b713acdd3be49872097ab79f664f807095f665a50c68803688d1a242c8580ce6e8355468f666d1d43e3bdb0deebd0df17f97e1ea397355",        "0x025779691bd93cc460e761ad2e8f5900a33a47112322c5503ee5d944e3aa7445b4efbb544881c13284d304c8c8cf0f0804ddc498be550555776fe15b714406ca",        "0x4f47e053cb4f4ff38fc52d9bfb7342b39edd7ef72f7f6cce22b2fa8a3b2656afec9076c239251d2b229245765c1dca005fb448f05e9ea946f40db9908d37abb4",        "0x9855b69ea2ff6b419de14b2ba18910e2427d251a3ffa453d9307a01dbabc213ef08cfad7459538dac14407046048bdd9f936ba317708b3f07a62782a2be6cca7",        "0xa93b150f11c422d8700554859281be8e34a91a859e0e021af186002c7e4a2661ea2467a63b417030d68e2fdddeb4342943dff13225da77124abf912fd092f71f"    ]}
```



### 18.获得区块交易

接口地址：**/v1/block/txs/get**

请求方式：**POST** 
请求参数:

| 参数名  | 必选 | 类型   | 说明   |
| ------- | ---- | ------ | ------ |
| chainId | Y    | String | 链ID   |
| height  | Y    | String | 块高   |
| page    | Y    | String | 页码   |
| size    | Y    | String | 页大小 |

返回参数说明

| 参数名 | 类型   | 说明     |
| ------ | ------ | -------- |
| code   | String | 返回码   |
| msg    | String | 返回信息 |
| data   |        |          |

data:

| 参数名         | 类型   | 说明 |
| -------------- | ------ | ---- |
| elections      | String |      |
| accountchanges | list   |      |

accountchanges:

| 参数名    | 类型    | 说明            |
| --------- | ------- | --------------- |
| chainid   | Int     | 发出人          |
| hash      | String  | 交易hash        |
| from      | String  | 交易发起地址    |
| extra     | String  |                 |
| input     | String  |                 |
| nonce     | Int     | 交易时候的nonce |
| timestamp | Long    | 交易时间        |
| to        | String  | 接收人          |
| uselocal  | boolean |                 |
| value     | Int     |                 |


请求示例

```json
{     "chainId": "103",     "height": "10270887",     "page": "1",     "size": "10"}
```

返回示例

```json
{    "code": 200,    "msg": "success",    "data": {        "elections": null,        "accountchanges": [            {                "chainid": 103,                "from": "0x9ae84284d7b152af900281c9e3969c8770197459",                "to": "0x7476313b9ec8a54dcbb4070514b4f0e4da8a1d2b",                "nonce": 222,                "value": 0,                "input": "0x8803dbee0000000000000000000000000000000000000000000000000de0b6b3a764000000000000000000000000000000000000000000000000000001b2b83a8117897100000000000000000000000000000000000000000000000000000000000000a00000000000000000000000009ae84284d7b152af900281c9e3969c8770197459000000000000000000000000000000000000000000000000000000005fbb8ed20000000000000000000000000000000000000000000000000000000000000002000000000000000000000000d9de66aacfc0872f3814c85f8771bbb2be01d582000000000000000000000000cfd5c7b893555b3bb48d4d2682af0016ae3509fb",                "hash": "0xd3d79de66a2e19ad864c1a5b9f23ff66402ba2aa632679003664486848062eda",                "uselocal": false,                "extra": "0x7b22676173223a363030303030307d",                "timestamp": 1606127019            }        ]    }}
```



### 19.获得区块头信息

接口地址：**/v1/block/header/get**

请求方式：**POST** 
请求参数:

| 参数名  | 必选 | 类型   | 说明 |
| ------- | ---- | ------ | ---- |
| chainId | Y    | String | 链ID |
| height  | Y    | String | 块高 |

返回参数说明

| 参数名 | 类型   | 说明     |
| ------ | ------ | -------- |
| code   | String | 返回码   |
| msg    | String | 返回信息 |
| data   |        |          |

data:

| 参数名         | 类型   | 说明 |
| -------------- | ------ | ---- |
| elections      | String |      |
| accountchanges | list   |      |

accountchanges:

| 参数名        | 类型    | 说明                   |
| ------------- | ------- | ---------------------- |
| chainid       | Int     | 发出人                 |
| deltaroot     |         |                        |
| empty         | boolean |                        |
| hash          | String  | 交易hash               |
| height        | Int     | 块高                   |
| mergeroot     |         |                        |
| previoushash  | String  |                        |
| rewardaddress | String  | 获奖地址               |
| rrera         |         |                        |
| rrnext        |         |                        |
| stateroot     | String  |                        |
| timestamp     | Long    |                        |
| txcount       | Int     | 这个块中发生了多少交易 |


请求示例

```json
{     "chainId": "103",     "height": "10270887"}
```

返回示例

```json
{    "code": 200,    "msg": "success",    "data": {        "hash": "0x8d9773300e165eb0812c7647134dba0ce655984e30d34151ceb5540f2bc39033",        "previoushash": "0x72c9df3c81e4013705b4b4a0d606f5593222e0016a0515243ce65181f6235301",        "chainid": 103,        "height": 10270887,        "empty": false,        "rewardaddress": "0x0b70e6f67512bcd07b7d1cbbd04dbbfadfbeaf37",        "mergeroot": "",        "deltaroot": "",        "stateroot": "0xfd796ee38a0a62c91ee6afa1d7aaa67cc5f2c3eae23ab4648f18b6bdc30037a3",        "rrera": 0,        "rrcurrent": "",        "rrnext": "",        "txcount": 1,        "timestamp": 1606127019,        "ErrMsg": ""    }}
```



### 20.进行主币交易

注意：此接口简单支持跨链交易，传入与chainId不同的toChainId，跨链交易由多个步骤组成，其中任何一步失败都会导致最终跨链交易失败。

接口地址：**/v1/tx/send**

请求方式：**POST** 
请求参数:

| 参数名      | 必选 | 类型   | 说明                           |
| ----------- | ---- | ------ | ------------------------------ |
| bussinessId | Y    | String | 服务id                         |
| chainId     | Y    | String | 链id                           |
| fromChainId | Y    | String | 转出链id（同chainId,跨链交易） |
| toChainId   | Y    | String | 转入链id（跨链交易）           |
| from        | Y    | String | 转出地址                       |
| to          | Y    | String | 转入地址                       |
| value       | Y    | Int    | 交易个数                       |
| nonce       | Y    | Int    | 交易的nonce                    |
| attach      | Y    | String | 业务参数                       |
| privateKey  | Y    | String | 加密后的私钥                   |
| notifyUrl   | Y    | String | 回调地址                       |

返回参数说明

| 参数名 | 类型   | 说明     |
| ------ | ------ | -------- |
| code   | String | 返回码   |
| msg    | String | 返回信息 |
| data   |        |          |

data:

| 参数名 | 类型   | 说明          |
| ------ | ------ | ------------- |
| Msg    | String | 提示信息      |
| Hash   | String | 交易hash      |
| Nonce  | Int    | 交易后的nonce |

请求示例

```json
{     "businessId": "1",     "chainId": "1",     "fromChainId": "1", // 同chainId，跨链交易转出链     "toChainId": "1", // 跨链交易时，传转入链id，普通交易同chainId     "from": "0xd40a7fa793ee48cf6a489366a53d2cbd7be1c9b3",     "to": "0xa973fc18182fe0a813F6CBadF38b6c8C1789317D",     "value": 10,     "nonce": 34,     "attach": "1234,thinkey,gs",     "privateKey": "1wz/9W9G5zLbAVlfzGWqvrJY+uzyq7yPvI7UssKWVeETAlSqCoaiBvrtPZrsfpuLpN2B4K2LE5k6D8AJ7W8YJUxDp0qe6n1KF+buqrX9xpM=",     "notifyUrl": "http://localhost:8101/v1/test/"}
```

返回示例

```json
{    "code": 200,    "msg": "success",    "data": {        "msg": "",        "hash": "0x54a0cab9ab9773b0d29b770d1138d0a500e50f32eebaefbff13304f22a157319",        "nonce": "34"    }}
```

注意chainId为发起交易的链id，status为1即为成功，以下交易亦是如此，就不做解释了。



### 21.主币交易-sig交易

接口地址：**/v1/tx/signed/send**

请求方式：**POST** 
请求参数:

| 参数名      | 必选 | 类型   | 说明              |
| ----------- | ---- | ------ | ----------------- |
| bussinessId | Y    | String | 服务id            |
| chainId     | Y    | String | 链id              |
| attach      | Y    | String | 业务参数          |
| notifyUrl   | Y    | String | 回调地址          |
| Transaction | Y    | JSON   | Sdk sig出来的数据 |

返回参数说明

| 参数名 | 类型   | 说明     |
| ------ | ------ | -------- |
| code   | String | 返回码   |
| msg    | String | 返回信息 |
| data   |        |          |

data:

| 参数名 | 类型   | 说明          |
| ------ | ------ | ------------- |
| Msg    | String | 提示信息      |
| Hash   | String | 交易hash      |
| Nonce  | Int    | 交易后的nonce |

请求示例

```json
{     "businessId": "1",     "chainId": "1",     "attach": "1,2,3,4,5",     "notifyUrl": "http://localhost:8101/v1/test/",     "transaction": {        "chainId": "1",        "fromChainId": "1",        "toChainId": "1",        "from": "0xd40a7fa793ee48cf6a489366a53d2cbd7be1c9b3",        "to": "0xa973fc18182fe0a813F6CBadF38b6c8C1789317D",        "nonce": "35",        "value": "35000000000000000000",        "sig": "0xd9b79ff166dac5efadbb91104b0ac3988a424f1da08d80a18996cc6f603eccda5ff3b1ac2ed6f84884baed074b1d6aa63440c6907e123ea3ab0cd44403465ad701",        "pub": "0x04ca6c6d236352ccb7b856c63ed2ee095b5d66e03467667e0a37dc5271bc611c26a85a783c54726e93fe2d4bce0305b75c64b77d9c625bfa513fe70b40076a368c",        "input": "",        "useLocal": false,        "extra": "",        "multipubs": null,        "multisigs": null    }}
```

返回示例

```json
{    "code": 200,    "msg": "success",    "data": {        "msg": "",        "hash": "0xab59d34babccdcbb99de6ea627be78ef1786939d4356ffdc8149e488ea13b12a",        "nonce": "0"    }}
```

注，验证是否成功，方法和主币交易一致











